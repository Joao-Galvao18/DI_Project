<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoSim - Final Polish</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <button id="menu-toggle" class="menu-btn">‚ò∞</button>

    <aside id="sidebar" class="sidebar">
        
        <div id="sidebar-lock" class="sidebar-lock hidden">
            <div class="lock-msg">
                <span style="font-size: 30px;">üîí</span><br>
                <strong>REPLAYING</strong><br>
                <small>Go Live to Edit</small>
            </div>
        </div>

        <div class="sidebar-header">
            <h2>ECO-CONTROL</h2>
            <button id="close-menu" class="close-btn">√ó</button>
        </div>

        <div class="tabs">
            <button class="tab-btn active" onclick="ui.switchTab('scenarios')">Scenarios</button>
            <button class="tab-btn" onclick="ui.switchTab('environment')">Env</button>
            <button class="tab-btn" onclick="ui.switchTab('species')">Species</button>
        </div>

        <div class="sidebar-content">
            
            <div id="tab-scenarios" class="tab-content active-content">
                <p class="hint">Load a preset configuration</p>
                <button class="btn btn-outline" onclick="sim.loadPreset('healthy')">üåø Healthy Reef</button>
                <button class="btn btn-outline" onclick="sim.loadPreset('threatened')">‚ö†Ô∏è Threatened Reef</button>
                <button class="btn btn-outline" onclick="sim.loadPreset('recovery')">üöë Recovery Assist</button>
                <hr class="divider">
                <button class="btn btn-save" onclick="ui.savePreset()">üíæ Save Current State</button>
            </div>

            <div id="tab-environment" class="tab-content">
                <div class="control-group">
                    <label>Temperature <span id="val-temp">25¬∞C</span></label>
                    <input type="range" id="slider-temp" min="15" max="35" value="25">
                </div>
                <div class="control-group">
                    <label>Pollution <span id="val-pol">0%</span></label>
                    <input type="range" id="slider-pol" min="0" max="100" value="0">
                </div>
                <hr class="divider">
                <label>Visualization Mode</label>
                <div class="view-toggles">
                    <button class="btn-sm active" id="view-std" onclick="sim.toggleView('standard')">Standard</button>
                    <button class="btn-sm" id="view-heat" onclick="sim.toggleView('heatmap')">Heatmap</button>
                </div>
            </div>

            <div id="tab-species" class="tab-content">
                <p class="hint">Click or Drag to spawn</p>
                
                <div class="draggable-item" draggable="true" ondragstart="ui.drag(event, 'fish')" onclick="ui.clickSpawn('fish')">
                    <span class="icon">üêü</span> <span>Small Fish</span>
                </div>
                
                <div class="draggable-item" draggable="true" ondragstart="ui.drag(event, 'shark')" onclick="ui.clickSpawn('shark')">
                    <span class="icon">ü¶à</span> <span>Predator</span>
                </div>
                
                <div class="draggable-item" draggable="true" ondragstart="ui.drag(event, 'coral')" onclick="ui.clickSpawn('coral')">
                    <span class="icon">ü™∏</span> <span>Coral</span>
                </div>

                <div class="draggable-item" draggable="true" ondragstart="ui.drag(event, 'food')" onclick="ui.clickSpawn('food')">
                    <span class="icon">ü¶ê</span> <span>Food</span>
                </div>
                
                <div class="draggable-item" draggable="true" ondragstart="ui.drag(event, 'oil')" onclick="ui.clickSpawn('oil')">
                    <span class="icon">üõ¢Ô∏è</span> <span>Pollutant</span>
                </div>
            </div>
        </div>

        <div class="sidebar-footer">
            <button class="btn-reset" onclick="location.reload()">‚Ü∫ RESET SIMULATION</button>
        </div>
    </aside>

    <main class="viewport">
        <div id="toast-container"></div>

        <div id="tooltip" class="tooltip hidden">
            <strong id="tt-type">Type</strong>
            <div id="tt-health">Health: 100%</div>
        </div>

        <div class="top-bar">
            <div class="compass">NORTH ‚¨Ü</div>
            <span id="speed-indicator">1x Speed</span>
            <button id="btn-go-live" class="live-btn hidden" onclick="sim.goLive()">üî¥ GO LIVE</button>
        </div>

        <canvas id="simCanvas"></canvas>

        <div class="timeline-container">
            <button id="btn-play" class="play-btn" onclick="sim.togglePlay()">‚è∏</button>
            
            <div id="timeline-scroll-area" class="timeline-scroll-area">
                <div class="timeline-content-wrapper">
                    <div id="timeline-track" class="timeline-track" onclick="sim.scrub(event)">
                        <div id="timeline-buffer" class="timeline-buffer"></div>
                        <div id="timeline-fill" class="timeline-fill"></div>
                        <div id="timeline-markers"></div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="simulation.js"></script>
</body>
</html>